<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>jspweb</title>
<link rel="stylesheet" href="css/style.css"></link>
<style type="text/css">
	div{
		width: 300px;
		height: 60px;
		border: 1px solid black;
	}
</style>
</head>
<body>

	<h3>자바스크립트+XML 비동기통신 예제</h3>

	<div id="target">
	</div>
	<br>
	<button onclick="getFromServer()">텍스트데이터 가져오기</button>
<script src="js/jquery-3.6.0.min.js"></script>	<!--사용하지 않으면 주석을 막을 것.-->
<script>
	function getFromServer(){
		
		var xmlhttp;
		if(window.XMLHttpRequest){	// 크롬 등브라우저 종류체크
			//xmlhttprequest 객체생성 = 비동기 통신
			xmlhttp = new XMLHttpRequest();
		}
		
		xmlhttp.onreadystatechange = function(){
			// 1 연결시작
			// 2 응답받음.
			// 3 응답처리
			// 처리 완료시 4번 & 처리성공시 200 코드 반환함.
			if(xmlhttp.readyState == 4 && xmlhttp.status==200){
				// 성공시 처리할 내용
				//alert(xmlhttp.responseText);
				document.getElementById("target").innerText = xmlhttp.responseText;
			}else{	//에러처리
				//alert("실패");
			}
		}
		
		xmlhttp.open("GET", "textfile.txt", true);
		xmlhttp.send();
		
	}
</script>
</body>
</html>